<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_list_picking_car_number">
   <t t-call="web.html_container">
            <div t-call="web.external_layout">
                    <div class="page" style="font-size:15px;">
                        <h2 align="center">執貨單</h2>
                        <div class="pull-right" style="margin-left:50%;"><strong>Date:</strong>
                            <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d')"/>
                        </div>
                    </div>
                    <t t-set="car_num" t-value="-1"/>
                    <t t-set="pre_category" t-value="0"/>
                    <div style="display: table;width: 100%;" name="picking_list_table">
                    <t t-foreach="docs" t-as="o">
                            <t t-if="pre_category != 0">
                                <t t-if="o.category != pre_category">
                                    <!--<p style="page-break-before: always;"></p>-->
                                </t>
                            </t>

                            <t t-set="pre_category" t-value="o.category"/>
                              <t t-if="o.car_number != car_num">
                                    <div style="display: table-header-group;">
                                        <div style="display: table-row;">
                                            <div style="display: table-cell;"><strong>車號:<span t-field="o.car_number"/></strong></div>
                                            <div style="display: table-cell;"></div>
                                            <div style="display: table-cell;"></div>
                                            <div style="display: table-cell;"></div>
                                        </div>
                                        <div style="display: table-row;">
                                            <div style="display: table-cell;"></div>
                                            <div style="display: table-cell;">貨品</div>
                                            <div style="display: table-cell;">數量</div>
                                            <div style="display: table-cell;">category</div>
                                        </div>
                                    </div>
                                   <t t-set="car_num" t-value="o.car_number"/>
                              </t>
                            <div style="display: table-header-group;">
                                <div style="display: table-row;">
                                    <div style="display: table-cell;"></div>
                                    <div style="display: table-cell;"><span t-field="o.productname"/></div>
                                    <div style="display: table-cell;"><span t-field="o.product_qty"/></div>
                                    <div style="display: table-cell;"><span t-field="o.category"/></div>
                                </div>
                            </div>
                    </t>
                  </div>
            </div>
    </t>
    </template>
</odoo>


