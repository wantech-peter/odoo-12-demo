<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="receipt_list_account">
        <xpath expr="//t[@t-call='web.external_layout']" position="replace">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="doc.with_context({'lang':doc.partner_id.lang})"/>
                    <div class="row">
                        <div class="col-2 offset-2">
                            <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" alt="Logo"
                                 style="width:120px;"/>
                        </div>
                        <div class="col-8" style="font-size:10px;">
                            <div t-field="o.company_id.name" style="font-size: 28px;font-weight: bold;"/>
                            <div t-field="o.company_id.social_linkedin" style="font-size: 18px;font-weight: bold;"/>
                            <div>
                                <span t-esc="o.company_id.street" style="margin-right:30px;"/>
                                <span t-esc="o.company_id.street2"/>
                            </div>
                            <div>
                                <span>電話：</span>
                                <span t-esc="o.company_id.phone" style="margin-right:30px;"/>
                                <span>會計部：</span>
                                <span t-esc="o.company_id.vat" style="margin-right:30px;"/>
                                <span>傳真：</span>
                                <span t-esc="o.company_id.social_github"/>
                                <br/>
                            </div>
                            <div>
                                <span>電郵：</span>
                                <span t-esc="o.company_id.email" style="margin-right:30px;"/>
                                <span>電址：</span>
                                <span t-esc="o.company_id.website"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4 offset-4">
                            <br></br>
                            <div style="font-size:25px;text-align:center;">正式收據</div>
                            <div style="font-size:20px;text-align:center;text-decoration:underline;">OFFICIAL RECEIPT
                            </div>
                        </div>
                        <div class="col-2 offset-2">
                            <span t-esc="doc.car_number.number"/>-
                            <span t-esc="doc.partner_id.customer_stopnum"/>
                        </div>
                        <!--
                        <div class="col-4">
                             <div style="font-size:18px;" class="row"><span class="col-5">No:</span><span class="col-7" style="border-bottom:1px solid;" t-esc="o.display_name"/></div>
                             <div style="font-size:18px;" class="row"><span class="col-5">Date:</span><span class="col-7" style="border-bottom:1px solid;" t-esc="o.date_order.strftime('%Y年%m月%d日')"/></div>
                        </div>
                        -->
                    </div>
                    <div class="page">
                        <div style="margin-top:30px; margin-bottom:10px">
                            <div class="row" style="margin-bottom:20px">
                                <div class="col-2" style="height:50px;font-size:14px;">
                                    <div>茲收到</div>
                                    <div>Received From:</div>
                                </div>
                                <div class="col-6" style="border-bottom:1px solid;height:40px">
                                    <span style="position: absolute;bottom: 0px; font-size:25px;">
                                        <span t-esc="o.partner_id.name"/>
                                    </span>
                                </div>
                                <div class="col-4" style="height:50px;">
                                    <div class="row">
                                        <div class="col-7" style="font-size:14px;">
                                            <div>客戶編號</div>
                                            <div>Customer Code:</div>
                                        </div>
                                        <div class="col-5" style="border-bottom:1px solid;">
                                            <span style="position: absolute;bottom: 0px; font-size:25px;">
                                                <span t-esc="o.partner_id.partner_number"/>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row" style="margin-bottom:10px">
                                <div class="col-3" style="height:35px;;font-size:14px;">
                                    <div>客戶地址</div>
                                    <div>address:</div>
                                </div>
                                <div class="col-9" style="border-bottom:1px solid;height:25px;">
                                    <span style="position: absolute;bottom: 0px; font-size:20px;">
                                        <span t-esc="o.partner_id.street"/>
                                    </span>
                                </div>
                            </div>

                            <div class="row" style="margin-bottom:10px">
                                <div class="col-3" style="height:50px;;font-size:14px;">
                                    <div>交來港幣</div>
                                    <div>Thr Sum Of H.K. Dollars:</div>
                                </div>
                                <div class="col-9" style="border-bottom:1px solid;height:40px;">
                                    <span style="position: absolute;bottom: 0px;">
                                        <span style="font-size:30px">HK$</span>
                                        <span t-esc="o.amount_total" style="font-size:30px"
                                              t-options='{"widget": "float", "precision": 0}'/>
                                    </span>
                                </div>
                            </div>


                            <div class="row" style="margin-bottom:10px">
                                <div class="col-3" style="height:50px;;font-size:14px;">
                                    <div>該款係付</div>
                                    <div>In The Payment Of:</div>
                                </div>

                                <div class="col-4" style="border-bottom:1px solid;height:40px">
                                    <span style="position: absolute;bottom: 0px;">
                                        <span>Invoice No.(發票編號)</span>
                                        <span t-esc="o.display_name" style="font-size:18px"/>
                                    </span>
                                </div>

                                <div class="col-5" style="height:50px;">
                                    <div class="row" style="margin-bottom:20px;">
                                        <div class="col-4" style="margin-bottom:20px;font-size:14px;">
                                            <div>發票日期</div>
                                            <div>Invoice Date:</div>
                                        </div>
                                        <div class="col-8" style="border-bottom:1px solid;height:40px">
                                            <span style="position: absolute;bottom: 0px;">
                                                <span t-esc="o.quotation_date.strftime('%Y年%m月%d日')"
                                                      style="font-size:18px"/>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-8" style="height:50px">
                                    <!--
                                      <div class="row" style="margin-bottom:20px">
                                          <div class="col-3" style="height:50px;font-size:14px;">
                                              <div>支付方式</div>
                                              <div>Payment Method:</div>
                                          </div>
                                          <div class="col-9" style="border-bottom:1px solid;height:40px;">
                                              <span style="position: absolute;bottom: 0px;"/>
                                          </div>
                                      </div>
                                      <div class="row" style="margin-bottom:20px">
                                         <div class="col-3" style="height:50px;font-size:14px;">
                                              <div>支票號</div>
                                              <div>Cheque No.:</div>
                                          </div>
                                          <div class="col-9" style="border-bottom:1px solid;height:40px;">

                                          </div>
                                      </div>

                                      <div class="row" style="margin-bottom:20px">
                                          <div class="col-2" style="height:50px;">
                                              <div style="position: absolute;bottom: 0px;">銀行/Bank</div>
                                          </div>
                                          <div class="col-4" style="border-bottom:1px solid;height:50px">
                                              <span style="position: absolute;bottom: 0px;"/>
                                          </div>
                                          <div class="col-2" style="height:50px;">
                                              <div style="position: absolute;bottom: 0px;">日期/Date</div>
                                          </div>
                                          <div class="col-4" style="border-bottom:1px solid;height:50px;">
                                              <span style="position: absolute;bottom: 0px;"/>
                                          </div>
                                      </div>
                                      -->
                                </div>
                                <div class="col-4">
                                    <div style="border-bottom:4px solid;height:120px;width:320px; align:center">
                                        <img t-att-src="image_data_uri(o.company_id.signature_pic)" alt="signature_pic"
                                             style="width:110px;"/>
                                    </div>
                                    <div>
                                        (收款人/Recevied By)
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </xpath>
    </template>


    <template id="receipt_list_accountb">
        <xpath expr="//t[@t-call='web.external_layout']" position="replace">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="doc"/>
                    <div class="row">
                        <div class="col-2 offset-2">
                            <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" alt="Logo"
                                 style="width:120px;"/>
                        </div>
                        <div class="col-8" style="font-size:10px;">
                            <div t-field="o.company_id.name" style="font-size: 28px;font-weight: bold;"/>
                            <div t-field="o.company_id.social_linkedin" style="font-size: 18px;font-weight: bold;"/>
                            <div>
                                <span t-esc="o.company_id.street" style="margin-right:30px;"/>
                                <span t-esc="o.company_id.street2"/>
                            </div>
                            <div>
                                <span>電話：</span>
                                <span t-esc="o.company_id.phone" style="margin-right:30px;"/>
                                <span>會計部：</span>
                                <span t-esc="o.company_id.vat" style="margin-right:30px;"/>
                                <span>傳真：</span>
                                <span t-esc="o.company_id.social_github"/>
                                <br/>
                            </div>
                            <div>
                                <span>電郵：</span>
                                <span t-esc="o.company_id.email" style="margin-right:30px;"/>
                                <span>電址：</span>
                                <span t-esc="o.company_id.website"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4 offset-4">
                            <br></br>
                            <div style="font-size:25px;text-align:center;">正式收據</div>
                            <div style="font-size:20px;text-align:center;text-decoration:underline;">OFFICIAL RECEIPT
                            </div>
                        </div>
                        <!--
                        <div class="col-4">
                             <div style="font-size:18px;" class="row"><span class="col-5">No:</span><span class="col-7" style="border-bottom:1px solid;" t-esc="o.display_name"/></div>
                             <div style="font-size:18px;" class="row"><span class="col-5">Date:</span><span class="col-7" style="border-bottom:1px solid;" t-esc="o.date_order.strftime('%Y年%m月%d日')"/></div>
                        </div>
                        -->
                    </div>
                    <div class="page">
                        <div style="margin-top:30px; margin-bottom:10px">
                            <div class="row" style="margin-bottom:20px">
                                <div class="col-2" style="height:50px;font-size:14px;">
                                    <div>茲收到</div>
                                    <div>Received From:</div>
                                </div>
                                <div class="col-6" style="border-bottom:1px solid;height:40px">
                                    <span style="position: absolute;bottom: 0px; font-size:25px;">
                                        <span t-esc="last_data.partner_id.name"/>
                                    </span>
                                </div>
                                <div class="col-4" style="height:50px;">
                                    <div class="row">
                                        <div class="col-7" style="font-size:14px;">
                                            <div>客戶編號</div>
                                            <div>Customer Code:</div>
                                        </div>
                                        <div class="col-5" style="border-bottom:1px solid;">
                                            <span style="position: absolute;bottom: 0px; font-size:25px;">
                                                <span t-esc="last_data.partner_id.partner_number"/>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row" style="margin-bottom:10px">
                                <div class="col-3" style="height:35px;;font-size:14px;">
                                    <div>客戶地址</div>
                                    <div>address:</div>
                                </div>
                                <div class="col-9" style="border-bottom:1px solid;height:25px;">
                                    <span style="position: absolute;bottom: 0px; font-size:20px;">
                                        <span t-esc="last_data.partner_id.street"/>
                                    </span>
                                </div>
                            </div>

                            <div class="row" style="margin-bottom:10px">
                                <div class="col-3" style="height:50px;;font-size:14px;">
                                    <div>交來港幣</div>
                                    <div>Thr Sum Of H.K. Dollars:</div>
                                </div>
                                <div class="col-9" style="border-bottom:1px solid;height:40px;">
                                    <span style="position: absolute;bottom: 0px;">
                                        <span style="font-size:30px">HK$</span>
                                        <span t-esc="total_amount" style="font-size:30px"
                                              t-options='{"widget": "float", "precision": 0}'/>
                                    </span>
                                </div>
                            </div>
                            <t t-set="partner_number" t-value=""/>
                            <div class="row">
                                <div class="col-3" style="font-size:14px;">
                                    <div>發票日期</div>
                                    <div>Invoice Date:</div>
                                </div>
                                <div class="col-9" style="border-bottom:1px solid;height:40px">
                                    <span style="position: absolute;bottom: 0px;">

                                        <span t-if="begin_date>end_date">
                                            <span t-esc="end_date.strftime('%Y年%m月%d日')" style="font-size:18px"/>
                                            <span>-</span>
                                            <span t-esc="begin_date.strftime('%Y年%m月%d日')" style="font-size:18px"/>
                                        </span>
                                        <span t-if="end_date>begin_date">
                                            <span t-esc="begin_date.strftime('%Y年%m月%d日')" style="font-size:18px"/>
                                            <span>-</span>
                                            <span t-esc="end_date.strftime('%Y年%m月%d日')" style="font-size:18px"/>
                                        </span>
                                    </span>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-8" style="height:50px">
                                </div>
                                <div class="col-4">
                                    <div style="border-bottom:4px solid;height:120px;width:320px; align:center">
                                        <img t-att-src="image_data_uri(o.company_id.signature_pic)" alt="signature_pic"
                                             style="width:110px;"/>
                                    </div>
                                    <div>
                                        (收款人/Recevied By)
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </xpath>
    </template>


    <template id="report_saleorder2">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="sales_order_list_receipt.receipt_list_account" t-lang="doc.partner_id.lang"/>
            </t>
        </t>
    </template>

    <template id="report_saleorder2b">
        <t t-call="web.html_container">
            <t t-set="partner_number" t-value=""/>
            <t t-set="total_amount" t-value="0"/>
            <t t-set="begin_date" t-value=""/>
            <t t-set="end_date" t-value=""/>
            <t t-set="last_data" t-value=""/>
            <t t-set="index" t-value="0"/>
            <!--<t t-set="docs" t-value="docs.sorted(key=lambda i : i.partner_id,  reverse=True)"/>-->
            <t t-foreach="docs" t-as="doc">
                <t t-if="partner_number == doc.partner_id.partner_number">
                    <t t-set="total_amount" t-value="total_amount + doc.amount_total"/>
                    <t t-set="end_date" t-value="doc.quotation_date"/>
                    <t t-set="last_data" t-value="doc"/>
                </t>
                <t t-if="partner_number != doc.partner_id.partner_number">
                    <t t-if="index != 0">
                        <t t-call="sales_order_list_receipt.receipt_list_accountb" t-lang="doc.partner_id.lang"/>
                    </t>
                    <t t-set="partner_number" t-value="doc.partner_id.partner_number"/>
                    <t t-set="total_amount" t-value="doc.amount_total"/>
                    <t t-set="begin_date" t-value="doc.quotation_date"/>
                </t>
                <t t-set="index" t-value="index+1"/>
            </t>
            <t t-set="doc" t-value="last_data"/>
            <t t-call="sales_order_list_receipt.receipt_list_accountb"/>
        </t>
    </template>

</odoo>




